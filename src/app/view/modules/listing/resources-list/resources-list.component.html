<!-- progress indicator while the data is loading -->
<salsah-progress-indicator *ngIf="isLoading && !errorMessage"></salsah-progress-indicator>

<!-- in the case of an API error: show the error message -->
<salsah-message *ngIf="errorMessage" [message]="errorMessage"></salsah-message>

<div *ngIf="num > 0; else noData"  [ngSwitch]="listType">
    <!-- show as table if listType === table -->
    <table *ngSwitchCase="'table'" class="salsah-table">
    </table>

    <!-- show as grid-list if listType === grid -->
    <md-grid-list *ngSwitchCase="'grid'" class="salsah-grid-list" [cols]="cols" gutterSize="12px" rowHeight="480px">
        <md-grid-tile *ngFor="let res of result.subjects; let i = index"
                      (click)="toggle(res.obj_id, i)"
                      [id]="res.obj_id">

            <md-card [class.highlight]="i == selectedRow" class="salsah-link">
                <img salsahImage [image]="res.preview_path" [type]="'resource'"
                     [class.salsah-resource-preview]="res.preview_path"
                     [class.salsah-resource-icon]="!res.preview_path"/>

                <md-card-content>
                    <md-card-title>{{res.value[0] | slice:0:40}}</md-card-title>
                    <md-card-subtitle class="salsah-preview-text">{{res.valuelabel[1]}}<br> {{res.value[1] | slice:0:120}}</md-card-subtitle>
                </md-card-content>

            </md-card>

        </md-grid-tile>
    </md-grid-list>

    <!-- default list -->
    <md-list class="salsah-list" *ngSwitchDefault>
        <md-list-item *ngFor="let res of result.subjects; let i = index"
                      (click)="toggle(res.obj_id, i)"
                      [id]="res.obj_id"
                      class="salsah-link"
                      [class.highlight]="i == selectedRow">
            <img md-list-avatar [src]="res.preview_path" class="salsah-preview-image" />
            <p md-line *ngFor="let val of res.value">
                {{val}}
            </p>
            <button md-icon-button class="right close close-highlight">
                <md-icon>close</md-icon>
            </button>
        </md-list-item>
    </md-list>
</div>

<!-- if there are any data: show a no data message -->
<ng-template #noData>
    <salsah-message *ngIf="!isLoading && !errorMessage" [message]="noDataMessage"></salsah-message>
</ng-template>
