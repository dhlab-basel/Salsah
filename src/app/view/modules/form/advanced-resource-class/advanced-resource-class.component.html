<table>
    <tr>
        <td>
            <!-- ***************** Card 1: Resource type **********************-->

            <mat-card class="advanced-resource-card">
                <mat-card-header>
                    <div mat-card-avatar class="header-image"></div>
                    <mat-card-title><b>Add new resource</b></mat-card-title>
                    <mat-card-subtitle>Here you can reate a custom resource type for your project.
                        Before creating a new resource type, please check the existing basic resource types found under
                        "Resources: add new resource".
                    </mat-card-subtitle>
                </mat-card-header>

                <mat-card-content>

                    <form #advResource="ngForm" class="advanced-resource-form">
                        <section>


                            <table class="full-width" cellspacing="0">
                                <tr>
                                    <td>
                                        <mat-input-container class="full-width-down">
                                            <input matInput
                                                   placeholder="Name *"
                                                   name="label"
                                                   [(ngModel)]="newAdvResource.label">
                                            <mat-hint class="salsah-hint">
                                                <span [hidden]="newAdvResource.label" class="salsah-error">This information is required!</span>
                                            </mat-hint>
                                        </mat-input-container>
                                    </td>
                                    <td>
                                        <button mat-raised-button
                                                class="full-width-button"
                                                [matTooltip]="'Browse files'"
                                                matTooltipPosition="above"
                                                (click)="uploadIcon($event)">
                                            Upload Icon
                                            <i class="material-icons">add</i>
                                        </button>
                                    </td>
                                </tr>
                            </table>

                            <p>
                                <mat-input-container class="full-width">
                            <textarea matInput
                                      placeholder="Description"
                                      name="description"
                                      [(ngModel)]="newAdvResource.description"
                                      cols="30" rows="5">
                            </textarea>
                                </mat-input-container>
                            </p>

                            <!-- resource permissions -->
                            <p mat-subheader>Set resource permissions</p>
                            <table class="full-width" cellspacing="0">
                                <tr>
                                <tr>
                                    <th *ngFor="let group of permissions.groups" [matTooltip]="group.description"
                                        matTooltipPosition="above" style="text-align:left">
                                        {{group.label}}
                                    </th>
                                </tr>
                                <tr>
                                    <td *ngFor="let group of permissions.groups; let i = index">
                                        <mat-select (ngModel)="newAdvResource.permissions[group.id]" [name]="group.id">
                                            <mat-option *ngFor="let cat of permissions?.categories" [value]="cat.id">
                                                {{cat.label}}
                                            </mat-option>
                                        </mat-select>
                                    </td>
                                </tr>
                            </table>
                        </section>
                        <section>
                            <p><br>
                                Select resource type
                            </p>

                            <p><br>
                                <mat-select placeholder="resource type" [(ngModel)]="newAdvResource.id"
                                            name="resourceClass">
                                    <mat-option *ngFor="let res of baseOntology?.resourceClasses | key"
                                                [value]="res.key">
                                        {{res.value.label}}
                                    </mat-option>
                                </mat-select>
                            </p>
                        </section>
                    </form>

                </mat-card-content>
                <mat-card-actions>
                    <button type="submit"
                            mat-button
                            class="save-button"
                            color="primary"
                            (click)="onSubmit(advResource.value)"
                            [disabled]="!advResource.valid">
                        SAVE
                    </button>
                </mat-card-actions>
            </mat-card>
        </td>


        <td>
            <!-- ***************** Card 2: Lists **********************-->
            <mat-card class="advanced-resource-card">
                <mat-card-header>
                    <div mat-card-avatar class="header-image"></div>
                    <mat-card-title><b>Create list element</b></mat-card-title>
                    <mat-card-subtitle> Here you can create new lists and hierarchical lists which you can use to
                        customize your properties.
                    </mat-card-subtitle>
                </mat-card-header>

                <mat-card-content>

                    <form #advList="ngForm" class="advanced-resource-form">

                        <section>
                            <mat-input-container class="full-width-down">
                                <input matInput placeholder="Name">
                            </mat-input-container>

                            <table class="full-width" cellspacing="0">
                                <tr>
                                    <td>
                                        <mat-input-container class="full-width">
                                            <input matInput placeholder="Label">
                                        </mat-input-container>
                                    </td>
                                    <td>
                                        <mat-input-container class="full-width">
                                            <input matInput placeholder="Icon">
                                        </mat-input-container>
                                    </td>
                                </tr>
                            </table>
                            <p>
                                <mat-input-container class="full-width">
                                    <textarea matInput placeholder="Description"></textarea>
                                </mat-input-container>
                            </p>
                        </section>

                        <p><br>
                            <b>Add list items</b>
                        </p>
                        <section class="addListItems">

                            <mat-list *ngIf="newListItem == true" class="showList">
                                <mat-list-item *ngFor="let listItem of listItems">
                                    {{listItem.description}}
                                    <div class="filler"></div>
                                    <button
                                        [matTooltip]="'Click to add a secondary list from this list item (hierarchical list)'"
                                        matTooltipPosition="after"
                                        class="playlistButton">
                                        <i class="playlist-add-icon">playlist_add</i>
                                    </button>
                                </mat-list-item>
                            </mat-list>

                            <mat-input-container class="full-width">
                                <input matInput
                                       placeholder="New item"
                                       #newItem
                                       (keyup.enter)="addListItem(newItem.value, $event)"
                                       (blur)="addListItem(newItem.value, $event); newItem.value='' ">
                            </mat-input-container>
                            <p>
                                <button [matTooltip]="'Click to add new list item'" matTooltipPosition="above"
                                        mat-mini-fab color="primary" (click)="addListItem(newItem.value, $event)">
                                    <i class="material-icons">add</i>
                                </button>
                                <!-- need to add the option to delete list item-->
                            </p>

                        </section>

                    </form>

                </mat-card-content>
                <mat-card-actions>
                    <button mat-button class="saveButton">SAVE</button>
                </mat-card-actions>
            </mat-card>

        </td>


        <td>
            <!-- ***************** Card 3: Properties **********************-->

            <mat-card class="advanced-resource-card">
                <mat-card-header>
                    <div mat-card-avatar class="header-image"></div>
                    <mat-card-title><b>Add new properties</b></mat-card-title>
                    <mat-card-subtitle> Here you can create and add properties to your resource.
                        Each property will be assigned cardinality and permission values.
                        You can create new properties, or choose from the pre-existing properties in a list.
                    </mat-card-subtitle>
                </mat-card-header>
                <mat-card-content>
                    <form #advProperties="ngForm" class="advanced-resource-form">

                        <section>
                            <mat-input-container class="full-width-down">
                                <input matInput placeholder="Name">
                            </mat-input-container>

                            <table class="full-width" cellspacing="0">
                                <tr>
                                    <td>
                                        <mat-input-container class="full-width">
                                            <input matInput placeholder="Label">
                                        </mat-input-container>
                                    </td>
                                    <td>
                                        <mat-input-container class="full-width">
                                            <input matInput placeholder="Icon">
                                        </mat-input-container>
                                    </td>
                                </tr>
                            </table>
                            <p>
                                <mat-input-container class="full-width">
                                    <textarea matInput placeholder="Description"></textarea>
                                </mat-input-container>
                            </p>
                        </section>

                        <p><br>
                            <b>Select existing property</b>
                            <small>(list all the base ontologies' properties)</small>
                        </p>
                        <p><br>
                            <mat-select placeholder="resource type" [(ngModel)]="resClass" name="resourceClass">
                                <mat-option *ngFor="let res of baseOntology?.resourceClasses | key" [value]="res.id">
                                    {{res.value.label}}
                                </mat-option>
                            </mat-select>
                            <mat-select placeholder="resource property" [(ngModel)]="resProp" name="resourceProperty">
                                <mat-option *ngFor="let prop of newAdvResource.properties | key" [value]="prop.id">
                                    {{prop.value.label}}
                                </mat-option>
                            </mat-select>
                        </p>
                        <p><br>
                            <b>Add custom properties</b>
                        </p>
                        <section class="addListItems">
                            <mat-list *ngIf="newcustomProp == true" class="showList">
                                <mat-list-item *ngFor="let customProp of customProps">
                                    {{customProp.description}}
                                    <div class="filler"></div>
                                </mat-list-item>
                            </mat-list>

                            <mat-input-container class="full-width">
                                <input matInput
                                       placeholder="New property"
                                       #newProperty
                                       (keyup.enter)="addCustomProperty(newProperty.value, $event)"
                                       (blur)="addCustomProperty(newProperty.value, $event); newProperty.value='' ">
                            </mat-input-container>
                            <p>
                                <button [matTooltip]="'Click to add new custom property'" matTooltipPosition="above"
                                        mat-mini-fab color="primary"
                                        (click)="addCustomProperty(newProperty.value, $event)">
                                    <i class="material-icons">add</i>
                                </button>
                                <!-- need to add the option to delete custom property-->
                            </p>

                        </section>

                    </form>

                </mat-card-content>
                <mat-card-actions>
                    <button mat-button class="saveButton">SAVE</button>
                </mat-card-actions>
            </mat-card>


            <form #arcf="ngForm" (ngSubmit)="onSubmit(arcf.value, arcf.valid)" class="salsah-form">
            </form>

        </td>
    </tr>
</table>

<div mat-card-actions>
    <button type="submit"
            mat-raised-button
            class="save-button"
            color="primary"
            (click)="onSubmit(arcf.value)"
            [disabled]="!arcf.valid">
        Save all
    </button>
</div>
